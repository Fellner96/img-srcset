/* imgsrcset - Img srcset polyfill for resolution responsive images. Authors & copyright (c) 2012: WebLinc, David Knight. */

(function(a){var g=0,j=0;a.Imgsrcset={srcsets:[],parse:function(){this.srcsets=[];var e=a.document.getElementsByTagName("img")||[],c=e.length-1;do{var b=e[c],d=b.getAttribute("srcset")||"";d&&(this.srcsets.push({element:b,media:d,matches:!1}),g++)}while(c--)},parseMatch:function(e){e=e.replace(/\s*,\s*/,",").split(",");for(var c=e.length,b={src:"",media:"",matches:!1},d=!0;c--;){for(var a=e[c].match(/[^\s]+/g),f=a.length,d=!0;f--;)if(0===f)b.src=a[f];else{var d=-1!==a[f].indexOf("w")&&"width"||-1!==
a[f].indexOf("h")&&"height"||-1!==a[f].indexOf("x")&&"resolution",h=a[f].match(/\d+/)[0],g=Media.features[d],h=Media.getAbsValue(h+("resolution"===d&&"dppx"||""));if(!(d="resolution"===d&&g===h||"resolution"!==d&&g<=h))break}d&&(b.media=e[c],b.matches=d)}return b.matches&&b||!1},watch:function(){clearTimeout(j);j=setTimeout(function(){var a=g;do{var c=Imgsrcset.srcsets[a],b=!1;"undefined"!==typeof c&&((b=Imgsrcset.parseMatch(c.media))&&c.matches!==b.media?(c.matches=b.media,c.element.setAttribute("src",
b.src)):b||(c.matches=!1))}while(a--)},10)},init:function(){a.Imgsrcset.parse();a.Imgsrcset.watch();Media.listen(a.Imgsrcset.watch)}};a.addEventListener?a.addEventListener("load",a.Imgsrcset.init):a.attachEvent("onload",a.Imgsrcset.init)})(window);